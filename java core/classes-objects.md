# Классы, объекты и ключевые слова

## Ключевые слова: this, super, final, static, abstract, transient, volatile, synchronized, native, strictfp

### 1. this

#### Общее описание и роль
* Cсылка на текущий объект.
* Позволяет однозначно обратиться к полям и методам объекта изнутри его же методов.

#### Ключевые концепции и определения
* Разрешение конфликтов имен, если локальная переменная или параметр совпадает с именем поля.
* Вызов другого конструктора изнутри конструктора через `this(...)` передав параметры в другой конструктор того же класса.

### 2. super

#### Общее описание и роль

* Ссылка на объект-родитель (суперкласс).
* Доступ к скрытым полям/методам родителя, вызов его конструктора.
* Если в конструкторе первой строчкой не вызывается super(..,), то JVM вставляет его туда неявно с пустыми параметрами. Так начинается цепочка конструкторов вплоть до Object.

### 3. final

#### Общее описание и роль

* Модификатор для классов, полей, методов: запрещает наследование/переопределение/изменение.

#### Ключевые концепции

* `final class` - нельзя наследовать.
* `final method` - нельзя переопределять.
* `final fiend` - константа: должна быть инициализирована один раз.

### 4. static

#### Общее описание и роль

* Связь с классом, а не с конкретным экземпляром класса.

#### Ключевые концепции

* `static field` - одно общее поле для всех объектов.
* `static method` - можно вызывать без создания объектов.
* `static block` - блок инициализации при загрузке класса.
* `static nested class` - вложенный класс, не имеющий ссылки на внешний экземпляр.

### 5. abstract

#### Общее описание и роль

* Модификатор для классов и и методов: класс нельзя инстанцировать, метод - обязателен к переопределнию в подклассах.

#### Ключевые концепции
* `abstract class` - может содержать как абстрактные так и конкретные методы.
* `abstract method` - метод без тела, только сигнатура; подкласс обязан реализовать.

### 6. transient

#### Общее описание и роль

* Аннотация к полю: при сериализации объекта поле игнорируется. При десериализации получат дефолтное значение.

### 7. volatile

#### Общее описание и роль

* Гарантирует видимость изменения переменной в разных потоках.

### 8. synchronized

#### Общее описание и роль

* Модификатор/блок для организации взаимного исключения. Работает над монитором.

#### Ключевые концепции

* Монитор объекта: каждый объект/class имеет связанный монитор.

* Взаимное исключение: один поток входит в блок/метод, другие ждут.

### 9. native

#### Общее описание и роль

* Метод реализуется на другом языке, не в Java-коде.

#### Ключевые концепции

* JNI (Java Native Interface): взаимодействие Java ↔ нативный код.

* Часто в системных библиотеках JVM.

### 10. strictfp

#### Общее описание и роль

* Обеспечивает строгую предсказуемую совместимость для операций с плавающей точкой между разными JVM.


## Конструкторы и цепочка super()

### Общее описание и роль

* Конструктор это специальный метод предназначенный для инициализации нового объекта. Этот метод вызывается при создании экземпляра при помощи оператора new. Цепочка super() управляет тем, как вызываются конструкторы родительских классов при иерархии наследования.

### Ключевые концепции и определения

1. Конструктор
    * Имеет тоже имя, что и класс, и не возвращает никакого значения (даже void).
    * Может быть перегружен: в классе может быть несколько конструкторов.
    * Если нет ни одного, компилятор автоматически создат публичный без параметров.
2. Вызов `this()`
    * Явный вызов другого конструктора того же класса.
    * Должен стоять первой строкой в в теле конструктора.
3. Вызов `super()`
    * Явный вызов конструктора суперкласса.
    * Если не указан, вставляет неявный super().
4. Цепочка конструкторов
    * Любой конструктор сначала вызывает либо конструктор своего класса `this(...)` либо вызывает конструктор суперкласса `super(...)`.
    * В конечном счете цепочка конструкторов дойдет до java.lang.Object конструктора и вернется обратно.
5. Порядок инициализации
    1. Статические блоки инициализации суперкласса.
    2. Статические блоки текущего класса.
    3. Инициализация полей экземпляра суперкласса и его блоки инициализации.
    4. Вызов конструктора суперкласса `super()`.
    5. Инициализация полей текущего экземпляра текущего класса и его блоки инициализации.
    6. Тело конструктора текущего класса.

## Инициализация объектов и блоки инициализации

### Общее описание и роль

```
Инициализация - процесс присвоения переменным полей и статическим переменным классам исходных значений. В java это происходит в несколько этапов.
```
1. Статические блоки инициализации `static {...}`: выполняются при загрузка класса в JVM, один раз.
2. Блоки инициализации экземпляра `{...}`: выполняются при создании каждого нового объекта перед вызовом конструктора.
3. Инициализация полей (в объявлении полей): выполянются в порядке объявления вместе с instance-блоками.


## instanceof, getClass() и Class<?>

### Общее описание и роль

* `instanceof` - опретаор проверки, является ли объект экземпляром заданного типа (класса или интерфейса).

* `getClass()` - метод класса Object, возвращает объект Class<?> описыающий точный runtime класс экземпляра.

* `Class<?>` - универсальный параметризованный тип для рефлексии, представляющий метаданные класса.

### Ключевые концепции и определения

* `obj instanceof Type` - true, если obj не null и его класс Type или подкласс Type (или реализует Type если Type - интерфейс).

* `Class<?>`
    * Каждый загруженный класс или интерфейс в JVM имеет единтсвенный объект `Class<?>`.
    * Через него реализуется вся возможная рефлексия.

## Класс Object и ключевые методы

### Общее описание и роль

`java.lang.Object` - ключевой класс иерархии: каждый класс в Java наследуется от него прямо и косвенно. Методы Object предоставляют базовое поведение для всех классов.

| Метод                             | Назначение                                                                                    |
| --------------------------------- | --------------------------------------------------------------------------------------------- |
| **`equals(Object)`**              | Логическое сравнение объектов на «равенство содержимого» вместо сравнения ссылок (`==`).      |
| **`hashCode()`**                  | Возвращает целочисленный хеш-код, согласованный с `equals`, для использования в хеш-таблицах. |
| **`toString()`**                  | Строковое представление объекта (по умолчанию — имя класса + хеш).                            |
| **`clone()`**                     | Поверхностное копирование объекта (если класс реализует `Cloneable`).                         |
| **`finalize()`**                  | Метод очистки перед сборкой мусора (устарел в Java 9, не рекомендуется).                      |
| **`wait()/notify()/notifyAll()`** | Низкоуровневый механизм организации ожидания и пробуждения потоков на мониторе объекта.       |
| **`getClass()`**                  | Возвращает объект `Class<?>`, описывающий точный класс экземпляра.                            |

### Механизмы работы

* `equals` + `hashCode`
    * Контракт: если `a.equals(b)` → `a.hashCode() == b.hashCode()`

* `toString()`
    * `getClass().getName() + "@" + Integer.toHexString(hashCode())`.

* `clone`
    * Определён в Object как protected native Object clone() throws CloneNotSupportedException.
    * Без реализации интерфейса Cloneable бросает CloneNotSupportedException.
    * Выполняет поверхностное копирование: простые поля копируются, а поля-ссылки — копируются сами ссылки.

