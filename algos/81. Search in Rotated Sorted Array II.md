Гниль гнилая гниль МНЕ НУЖНО БОЛЬШЕ КРАЕВЫХ СЛУЧАЕВ

В общем дан массив nums неубывающий. В нем выбрали индекс k и поставили все элементы k, k+1, ... в начало массива.
Нужно проверить есть ли в массиве target за минимальное время. Сразу понятно что тут удобно использовать бинпоиск.
Я пытался бинпоиском найти этот индекс k и потом запускать два бинпоиска слева и справа, однако из-за дубликатов слишком много краевых случаев.
Другое решение это написать кастомный бинпоиск, который работает по следующей логике - 
смотрим на левую половину:
* если левая отсортирована и таргет подходит по границам, переходим туда
* если правя отсортирована и таргет проходит по границам, переходим туда
* если левая отсотрирована но таргет не подходит по границам то переходим в правую
* если правая отсортирована но таргет не подходит по границам то переходим в левую
* если левая гравница прваая граница и середина равны, то просто смещаем на 1 левую и првую границы.